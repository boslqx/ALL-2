<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cashier Dashboard</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/cashier.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>
    <div class="sidebar">
        <div class="logo">
            <h2>{{ cashier_name }}</h2>
        </div>
        <ul class="nav-menu">
            <li class="nav-item {% if active_tab == 'dashboard' %}active{% endif %}" onclick="window.location.href='{{ url_for('cashier.dashboard') }}'">
                <i class="fas fa-tachometer-alt"></i>
                <span>Dashboard</span>
            </li>
            <li class="nav-item {% if active_tab == 'new_transaction' %}active{% endif %}" onclick="window.location.href='{{ url_for('cashier.new_transaction') }}'">
                <i class="fas fa-cash-register"></i>
                <span>New Transaction</span>
            </li>
            <li class="nav-item" onclick="window.location.href='{{ url_for('cashier.checkout_page') }}'">
                <i class="fas fa-receipt"></i>
                <span>Checkout</span>
            </li>
            <li class="nav-item logout" onclick="showLogoutModal()">
                <i class="fas fa-sign-out-alt"></i>
                <span>Logout</span>
            </li>
        </ul>
    </div>


    <!-- Main Content -->
    <div class="main-content">
        <h1>Welcome Back, Cashier</h1>
        
        <div class="dashboard-container">
            <!-- Stock Alerts Section -->
            <div class="card stock-alerts">
                <h2>Stock Alert</h2>
                <div class="alert-list">
                    {% for alert in stock_alerts %}
                    <div class="alert-item">
                        <div class="alert-header">
                            <strong>Order ID {{ alert.StockAlertID }}</strong>
                        </div>
                        <div class="alert-details">
                            <span>{{ alert.Timestamp.strftime('%Y-%m-%d') }}</span>
                            <span>{{ alert.product.StockQuantity }} left</span>
                            <span class="status {{ alert.AlertStatus|lower }}">{{ alert.AlertStatus }}</span>
                        </div>
                    </div>
                    {% else %}
                    <div class="no-alerts">
                        No stock alerts at this time
                    </div>
                    {% endfor %}
                </div>
            </div>
            
            <!-- Latest Transactions Section -->
            <div class="card latest-transactions">
                <h2>Latest Transaction</h2>
                <div class="transaction-list">
                    {% for transaction in recent_transactions %}
                    <div class="transaction-item">
                        <div class="transaction-header">
                            <strong>T{{ transaction.TransactionID }}</strong>
                        </div>
                        <div class="transaction-time">
                            {{ transaction.Datetime.strftime('%Y-%m-%d %H:%M') }}
                        </div>
                        <div class="transaction-amount">
                            RM{{ "%.2f"|format(transaction.TotalAmount) }}
                            <span class="status complete">Complete</span>
                        </div>
                    </div>
                    {% else %}
                    <div class="no-transactions">
                        No recent transactions
                    </div>
                    {% endfor %}
                </div>
            </div>
            
            <!-- Quick Actions Section -->
            <div class="card quick-actions">
                <h2>Quick Actions</h2>
                <div class="action-buttons">
                    <button class="action-button" onclick="window.location.href='{{ url_for('cashier.new_transaction') }}'">
                        <i class="fas fa-cash-register"></i>
                        New Transaction
                    </button>
                    <button class="action-button" onclick="window.location.href='#'">
                        <i class="fas fa-history"></i>
                        Recent Sales
                    </button>
                    <button class="action-button" onclick="window.location.href='#'">
                        <i class="fas fa-user"></i>
                        Employee
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Logout Confirmation Modal -->
    <div id="logoutModal" class="modal">
        <div class="modal-content">
            <p>Are you sure you want to log out?</p>
            <div class="modal-buttons">
                <button id="cancelLogout" class="cancel-btn">No</button>
                <a href="{{ url_for('login.logout') }}" class="confirm-btn">Log Out</a>
            </div>
        </div>
    </div>

    <script>
        function showLogoutModal() {
            document.getElementById('logoutModal').style.display = 'flex';
        }

        document.getElementById('cancelLogout').addEventListener('click', function() {
            document.getElementById('logoutModal').style.display = 'none';
        });
    </script>
</body>
</html>