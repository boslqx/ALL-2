{% extends 'cashier_base.html' %}

{% block title %}Cashier Dashboard{% endblock %}

{% block content %}

<style>
    .transaction-list {
        max-height: 300px;
        overflow-y: auto;
    }

</style>
<h1>Welcome Back, Cashier</h1>

<div class="dashboard-container">
    <!-- Stock Alerts Section -->
    <div class="card stock-alerts">
        <h2>Stock Alert</h2>
        <div class="alert-list">
            {% for alert in stock_alerts %}
            <div class="alert-item">
                <div class="alert-header">
                    <strong>Order ID {{ alert.StockAlertID }}</strong>
                </div>
                <div class="alert-details">
                    <span>{{ alert.Timestamp.strftime('%Y-%m-%d') }}</span>
                    <span>{{ alert.product.StockQuantity }} left</span>
                    <span class="status {{ alert.AlertStatus|lower }}">{{ alert.AlertStatus }}</span>
                </div>
            </div>
            {% else %}
            <div class="no-alerts">
                No stock alerts at this time
            </div>
            {% endfor %}
        </div>
    </div>

    <!-- Latest Transactions Section -->
    <div class="card latest-transactions">
        <h2>Latest Transaction</h2>
        <div class="transaction-list">
            {% for transaction in recent_transactions %}
            <div class="transaction-item">
                <div class="transaction-header">
                    <strong>T{{ transaction.TransactionID }}</strong>
                </div>
                <div class="transaction-time">
                    {{ transaction.Datetime.strftime('%Y-%m-%d %H:%M') }}
                </div>
                <div class="transaction-amount">
                    RM{{ "%.2f"|format(transaction.TotalAmount) }}
                    <span class="status complete">Complete</span>
                </div>
            </div>
            {% else %}
            <div class="no-transactions">
                No recent transactions
            </div>
            {% endfor %}
        </div>
    </div>

    <!-- Quick Actions Section -->
    <div class="card quick-actions">
        <h2>Quick Actions</h2>
        <div class="action-buttons">
            <button class="action-button" onclick="window.location.href='{{ url_for('cashier.new_transaction') }}'">
                <i class="fas fa-cash-register"></i>
                New Transaction
            </button>
            <button class="action-button" onclick="window.location.href='{{ url_for('cashier.transaction_history') }}'">
                <i class="fas fa-history"></i>
                Transaction History
            </button>
        </div>
    </div>
</div>
{% endblock %}
